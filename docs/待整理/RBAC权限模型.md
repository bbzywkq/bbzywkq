# RBAC权限模型
[toc]



# 1.概念
**Role-based Access Control，****基于角色的权限控制模型****。**

**顾名思义，给用户定义角色，通过角色来控制权限。**目前来说基于角色权限控制模型是应用较广的一个。特别是2B方向SAAS领域，应用尤其常见。

![image](images/x2KT_efNMIBCdxl70IZsOv9TAMWQPhSA8zhxVSfz-Rg.png)

如上图示，用户拥有角色，且可拥有多个角色，而每个角色对应不同权限。

这样的好处是：不必为每一个用户去配置权限，拥有极大的灵活性和便利性。而当用户及权限的量级又大到另一个级别时，又引入了角色组和权限组概念。

# 2.利用RBAC模型来进行权限体系的设计
首先是：用户、角色、权限。

而权限，具体到某个软件来说，实际上包含两个方面。一个是菜单权限，另一个是数据权限。

![image](images/Yl3NoLmQEUceqb01fudKnOF_ofOJM67LR00nZOzM7ko.png)

# 3.ABAC权限模型的简单说明
ABAC到底是什么呢？它存在的意义在哪里？关于未来的权限设计趋势，它能带给我们什么启发呢？

**ABAC，Attribute-based Access Control**. 基于属性的访问控制。而属性，总的来说有三类：用户属性、系统或应用被访问属性（数据和操作）、环境属性。

也就是说，系统根据一组或多组属性是否满足预设规则来动态的控制，谁可以访问哪些功能数据和操作。RBAC模型，其实可以看成是静态的、单组属性的ABAC模型。

BAC则是通过动态计算一个或一组属性来是否满足某种条件来进行授权判断（可以编写简单的逻辑）。属性通常来说分为四类：用户属性（如用户年龄），环境属性（如当前时间），操作属性（如读取）和对象属性（如一篇文章，又称资源属性），所以理论上能够实现非常灵活的权限控制，几乎能满足所有类型的需求。

用例子来理解这个模型就是：只有当用户角色为Admin，在工作时间内，且处在C栋大楼B实验室，才可以访问D文件。

实际上，ABAC是个可以以最细颗粒度来管理权限的模型。它可以让设计者，利用任何一个用户属性、环境属性，或者多个属性之间的交集、并集等来组合出动态的权限判断逻辑。

**结论**

* 集中化管理
* 可以按需实现不同颗粒度的权限控制
* 不需要预定义判断逻辑，减轻了权限系统的维护成本，特别是在需求经常变化的系统中
* 定义权限时，不能直观看出用户和对象间的关系
* 规则如果稍微复杂一点，或者设计混乱，会给管理者维护和追查带来麻烦
* 权限判断需要实时执行，规则过多会导致性能问题

**其他**

既然ABAC这么好，那最流行的为什么还是RBAC呢？

我认为主要还是因为大部分系统对权限控制并没有过多的需求，而且ABAC的管理相对来说太复杂了。

[Kubernetes便因为ABAC太难用，在](https://link.jianshu.com/?t=http://blog.kubernetes.io/2017/04/rbac-support-in-kubernetes.html)`1.8`[版本里引入了RBAC的方案](https://link.jianshu.com/?t=http://blog.kubernetes.io/2017/04/rbac-support-in-kubernetes.html)。