# 异步复制


MySQL默认的复制即是异步的，主库在执行完客户端提交的事务后会立即将结果返给给客户端，并不关心从库是否已经接收并处理，这样就会有一个问题，主如果crash掉了，此时主上已经提交的事务可能并没有传到从上，如果此时，强行将从提升为主，可能导致新主上的数据不完整

主库将事务Binlog事件写入到Binlog文件中，此时主库只会通知一下Dump线程发送这些新的Binlog，然后主库就会继续处理提交操作，而此时不会保证这些Binlog传到任何一个从库节点上。

```Plain Text
[mysqld]
server-id=111
log_bin=shouxin
#步进值auto_imcrement。一般有n台主MySQL就填n
auto_increment_increment=2
#设定数据库中自动增长的起点，两台mysql的起点必须不同，这样才能避免两台服务器同步时出现主键冲突
auto_increment_offset=1
#指定不同步的数据库，如果有多个数据库不需要同步可以多个分别声明
#binlog-ignore=mysql
#binlog-ignore=information_schema
#binlog-ignore=performance_schema
#要同步的数据库，如果需要就填，指定数据库的名称即可，默认为所有库，声明了不同步就默认除了不同步数据库意外的所有库
#replicate-do-db=
#指定utf8为默认字符集
character_set_server=utf8
#在默认情况下mysql会阻止主从同步的数据库function的创建,这会导致我们在导入sql文件时如果有创建function或者使用function的语句将会报错
log-bin-trust-function-creators=1
```