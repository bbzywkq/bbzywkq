# 社区视频处理支持
# 视频首帧截图
流程说明如下：

1，用户上传社区笔记的视频

注意上传指定的文件名必须已：curriculum\_video 为前缀 否则不进入首帧截图工作流处理。

2，前端上传完成后，文件服务会自动截图对应视频的首帧 并保存为如下图像文件：

例如视频文件为：{文件服务域名}+curriculum\_video\_test

则文件服务处理完成后对应图片的访问路径为：{文件服务域名}+curriculum\_video\_test\_screenshot

图片为：jpg格式

注意点：用户编辑笔记时上传视频完成后 不会立即生成首帧截图文件，有一定时间周期

首帧截图完成时会向后端如下服务地址推送首帧截图处理完成状态 (此回调接口已经部署至dev-remote环境) ：

[http://dev.hefeidc.com/api/forum-system/uploads/videoScreenShotCallBack](http://dev.hefeidc.com/api/forum-system/uploads/videoScreenShotCallBack)

后端根据状态码,可获取处理状态，成功状态时 如下图所示 key值 为对应视频的首帧截图地址。

![image](images/r--KUsFjUm_vKDhhZ9GRmQLoMQnXVMvkT4mnVRfEE1A.png)

```Plain Text
回调地址：http://dev.hefeidc.com/api/forum-system/uploads/videoScreenShotCallBack

匹配规则：
前缀：curriculum_video
输出：hefei_+{文件名}+_screenshot

https://file.medicalsj.com/hefei_curriculum_video_screen_testb298a9f4d1797e01f7c03ea38f2359b2_screenshot.jpg


?vframe/jpg/offset/1
```


